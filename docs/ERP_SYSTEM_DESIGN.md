# ERP系统设计方案

## 1. 概述

本文档详细描述了ERP系统的设计方案，包括布局、样式和功能需求。该系统基于现有的产品管理系统进行扩展，增加了新的功能模块和界面优化。

## 2. 系统布局

### 2.1 整体布局

- **左右结构**：系统采用左右结构布局，左侧为菜单栏，右侧为内容区域
- **菜单栏**：默认情况下处于缩进状态，点击后可以展开
- **响应式设计**：适配不同尺寸的屏幕，确保在各种设备上都有良好的用户体验

### 2.2 菜单栏设计

- **缩进状态**：只显示图标，节省空间
- **展开状态**：显示完整的菜单项文本和图标
- **菜单项**：包括POD选品页、数据管理、系统设置等
- **视觉效果**：当前选中的菜单项高亮显示，鼠标悬停时有轻微的视觉反馈

### 2.3 内容区域

- **顶部导航**：显示当前页面标题、面包屑导航和用户信息
- **主要内容**：根据选择的菜单项显示相应的功能页面
- **底部信息**：版权信息和系统版本号

## 3. 系统样式

### 3.1 设计原则

- **简洁**：界面简洁明了，避免视觉干扰
- **一致性**：保持整个系统的视觉语言一致
- **专业性**：符合主流ERP系统的设计风格，注重实用性

### 3.2 色彩方案

- **主色调**：使用蓝色系作为主色调，体现专业性和可靠性
- **辅助色**：使用灰色和白色作为辅助色，提供良好的对比度
- **功能色**：使用绿色表示成功，红色表示错误，黄色表示警告

### 3.3 字体和图标

- **字体**：使用无衬线字体，确保在各种设备上的可读性
- **图标**：使用Font Awesome图标库，保持一致的视觉风格

## 4. 功能需求

### 4.1 POD选品页

基于现有的商品选择页面，进行以下改进：

#### 4.1.1 新增功能

- **导入CSV按钮**：
  - 位置：在"刷新数据"按钮左边
  - 功能：点击后弹出文件选择对话框，选择CSV文件进行导入
  - 处理逻辑：解析CSV文件，提取数据写入imagedb.csv
  - 参考实现：利用现有的从images/csv文件夹下的csv文件中提取数据写入imagedb.csv的功能

- **删除功能**：
  - 移除"下载选择"和"查看已下载"按钮
  - 移除"全选当前页"和"清除选择"按钮

- **已选择功能**：
  - 点击"已选择"统计卡片或按钮时，页面跳转到已选商品页面
  - 跳转时携带已选择的商品信息

#### 4.1.2 已选商品页面

- **页面入口**：在商品选择页面点击"已选择"统计卡片或相关按钮进入
- **展示方式**：
  - 采用与选择商品页相同的卡片形式展示已选择的商品信息
  - 保持样式、尺寸和内容不变
  - 只显示用户已经选择的商品，不显示其他商品
- **页面功能**：
  - 展示所有已选择商品的详细信息
  - 提供商品卡片的统一展示界面

- **新增功能**：
  - **PNG转换按钮**：
    - 位置：页面上方
    - 文本："已选商品转换为PNG格式"
    - 功能：点击后，将选中的图片自动去掉白底，转换为PNG格式
    - 实现：利用现有的WhiteBackgroundRemover类进行处理
  
  - **飞书表格写入**：
    - 功能：将处理后的图片写入飞书表格的prd_model_sheet页面
    - 位置：产品图列和产品名列
    - API参考：https://open.feishu.cn/document/server-docs/docs/sheets-v3/data-operation/append-data

## 5. 技术实现

### 5.1 前端实现

- **框架**：继续使用Bootstrap和Flask模板
- **交互**：使用JavaScript实现菜单展开/缩进、页面切换等交互效果
- **响应式**：使用Bootstrap的栅格系统实现响应式布局

### 5.2 后端实现

- **路由**：新增路由处理CSV导入和PNG转换功能
- **数据处理**：扩展现有的CSVProcessor类，增加直接导入功能
- **图像处理**：利用现有的WhiteBackgroundRemover类处理图片
- **飞书API**：实现飞书表格写入功能

## 6. 实现步骤

### 6.1 前端开发

1. 创建ERP系统的基础布局（左右结构）
2. 实现菜单栏的展开/缩进功能
3. 修改现有的商品选择页面，添加导入CSV按钮，移除不需要的按钮
4. 优化已选商品页面，添加PNG转换按钮

### 6.2 后端开发

1. 实现CSV导入功能
2. 实现PNG转换功能
3. 实现飞书表格写入功能
4. 整合现有功能，确保系统正常运行

### 6.3 测试与部署

1. 功能测试：确保所有功能正常工作
2. 界面测试：确保界面在不同设备上显示正常
3. 部署系统：部署到生产环境

## 7. 任务清单

### 7.1 前端任务

- [x] 创建ERP系统基础布局
- [x] 实现菜单栏展开/缩进功能
- [x] 修改商品选择页面
- [x] 优化已选商品页面
- [x] 添加PNG转换按钮

### 7.2 后端任务

- [x] 实现CSV导入功能
- [x] 实现PNG转换功能
- [x] 实现飞书表格写入功能
- [x] 整合现有功能

### 7.3 测试任务

- [x] 功能测试
- [x] 界面测试
- [x] 兼容性测试

## 8. 时间规划

- 前端开发：3天
- 后端开发：4天
- 测试与调整：2天
- 总计：9天

## 9. 风险评估

- **飞书API集成**：可能需要处理API限制和权限问题
- **图像处理性能**：大量图片处理可能导致性能问题
- **用户适应性**：新界面可能需要用户适应时间

## 10. 结论

本设计方案详细描述了ERP系统的布局、样式和功能需求，为开发团队提供了明确的指导。通过实现这些功能，系统将更加符合用户需求，提高工作效率。